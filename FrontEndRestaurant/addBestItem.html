        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>Add Best Item</title>
            <link rel="stylesheet" href="itemAdjust.css">
        </head>
        <body>
            <header>
                <!-- NAVIGATION BAR -->
                <h1 class="logo_name">ROCKETMEAL</h1>
                <div>
                    <p class="logo_description">30 minutes</p>
                    <ul class="navigation_bar">
                        <li class="nav_list" onclick="logOut()"><a href="">Logout</a></li>
                        <li class="nav_list"><a href="">About Us</a></li>
                        <li class="nav_list"><a href="">Food Categories</a></li>
                        <li class="nav_list"><a href="index.html">Home</a></li>
                    </ul>
                </div>
            </header>

            <main>
                <section class="menu-section">
                    <h2 style="text-align: center; margin-top: 45px; color: white;">Add Your Best Items To “Best Seller”</h2>
                    <h3 style="text-align: left;margin-top: 48px;color: #D7CFCF;margin-left: 30px;">Full menu</h3>
                    <div class="menu-grid">
                        
                    </div>
                </section>
                <div class="button-container">
                    <button class="custom-button" type="button">Done</button>
                </div>
            </main>

            <footer>
                <p>Are you a partner of ROCKETMEAL? <a href="#">Click here to go to partner's page</a></p>
                <p>&copy; 2024 ROCKETMEAL</p>
            </footer>
            <script>
                document.addEventListener('DOMContentLoaded', () => {
                    const restaurantId = localStorage.getItem('restaurantId'); // Lấy restaurantId từ localStorage
                    if(!restaurantId)
                    window.location.href = '/FrontEndRestaurant/restaurantLogin.html'
                    
                    // Gọi hàm fetch để lấy danh sách món ăn
                    localStorage.setItem('selectedBestSeller', JSON.stringify([]));

                    fetchDishes();
            
                    function fetchDishes() {
                        fetch(`http://localhost:8081/restaurants/profile?id=${restaurantId}`)
                            .then(response => response.json())
                            .then(data => {
                                console.log(data.bestsellerDishDtoList);
                                console.log(data.dishDtoList);
                                displayDishesNotInBestSeller(data.dishDtoList, data.bestsellerDishDtoList);
                            })
                            .catch(error => console.error('Error fetching dishes:', error));
                    }

                    function displayDishesNotInBestSeller(dishDtoList, bestsellerDishDtoList){
                        const bestsellerIds = bestsellerDishDtoList.map(dish => dish.id);

                        dishDtoList.filter(dish => !bestsellerIds.includes(dish.id))
                        .map(dish => 
                        {
                            const newFoodItemHTML = `
                                <div class="food-item">
                                    <!-- Image of the food -->
                                    <img src="images/macca-items/nugget.png" alt="">
                                    <!-- Button with "+" sign inside the image -->
                                    <button onclick="(function(id) {
                                        // Lấy mảng từ localStorage
                                        let selectedBestSeller = JSON.parse(localStorage.getItem('selectedBestSeller'));
                                        const index = selectedBestSeller.indexOf(id);
                                        if (index === -1) {
                                            selectedBestSeller.push(id);
                                        } else {
                                            selectedBestSeller.splice(index, 1);
                                        }
                                        // Lưu mảng vào localStorage
                                        localStorage.setItem('selectedBestSeller', JSON.stringify(selectedBestSeller));
                                        console.log(selectedBestSeller);
                                    })(${dish.id})">+</button>
                                    <!-- Food name and price -->
                                    <div class="food-details">
                                        <div class="food-name">${dish.name}</div>
                                        <div class="food-price">$${dish.price}</div>
                                    </div>
                                </div>
                            `;

                            const menuGrid = document.querySelector('.menu-grid');

                            menuGrid.innerHTML += newFoodItemHTML;
                        });
                    }

                    const foodItems = document.querySelectorAll('.food-item');
                    const doneButton = document.querySelector('.custom-button');
                
                    foodItems.forEach(item => {
                        item.querySelector('button').addEventListener('click', () => {
                            item.classList.toggle('selected');
                            const itemName = item.querySelector('.food-name').textContent;
                
                            if (item.classList.contains('selected')) {
                                selectedItems.push(itemName);
                            } else {
                                selectedItems = selectedItems.filter(name => name !== itemName);
                            }
                        });
                    });
                
                    doneButton.addEventListener('click', () => {
                        const id = parseInt(localStorage.getItem('restaurantId'));
                        const selectedBestSeller = JSON.parse(localStorage.getItem('selectedBestSeller')).join(',');
                        fetch(`http://localhost:8081/restaurants/food/bestsellers?dishId=${selectedBestSeller}&id=${id}`, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            }
                        })
                        .then(response => response.json())
                        .then(data => {
                            alert('Best sellers updated successfully!');
                            window.location.href = 'restaurantPage.html';
                        })
                        .catch(error => {
                            console.error('Error:', error);
                            alert('Failed to update best sellers.');
                        });
                    });
                });

                function logOut() {
                    localStorage.removeItem("restaurantId");
                    window.location.href = "/FrontEndRestaurant/restaurantLogin.html";
                }
                </script>
                
        </body>
        </html>
